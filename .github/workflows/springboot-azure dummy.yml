# Docs for the Azure Web Apps Deploy action: https://github.com/Azure/webapps-deploy
# More GitHub Actions for Azure: https://github.com/Azure/actions

name: Test

on:
  push:
    branches:
      - master
  workflow_dispatch:


jobs:
  fetch_variable:
    runs-on: ubuntu-latest

    steps:
      - name: Fetch Variable Value
        id: fetch
        run: |
          ENVIRONMENT_NAME="development"
          VARIABLE_NAME="AZURE_APP_SERVICE_NAME"

          curl -L \
          -H "Accept: application/vnd.github+json" \
          -H "Authorization: Bearer ${{ secrets.API_TOKEN }}" \
          -H "X-GitHub-Api-Version: 2022-11-28" \
          https://api.github.com/repositories/${{ github.repository_id }}/environments/$ENVIRONMENT_NAME/variables/$VARIABLE_NAME

      - name: Show Variable Value
        run: echo "The value is ${{ steps.fetch.outputs.value }}"
